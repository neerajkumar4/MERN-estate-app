{"ast":null,"code":"'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport pick from 'lodash/pick';\nimport omit from 'lodash/omit';\nimport isFunction from 'lodash/isFunction';\nimport isNil from 'lodash/isNil';\nimport DropdownMenu from './DropdownMenu';\nimport Checkbox from '../Checkbox';\nimport { useCascadeValue, useColumnData, useFlattenData, isSomeChildChecked } from './utils';\nimport { getNodeParents, findNodeOfTree } from '../utils/treeUtils';\nimport { getColumnsAndPaths } from '../Cascader/utils';\nimport { createChainedFunction, mergeRefs, getSafeRegExpString, useClassNames, useCustom, useUpdateEffect, useControlled } from '../utils';\nimport { PickerToggle, PickerOverlay, SearchBar, SelectedElement, PickerToggleTrigger, usePickerClassName, usePublicMethods, useToggleKeyDownEvent, useFocusItemValue, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nvar emptyArray = [];\n\n/**\n * The `MultiCascader` component is used to select multiple values from cascading options.\n * @see https://rsuitejs.com/components/multi-cascader/\n */\nvar MultiCascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _selectedPaths;\n  var _props$as = props.as,\n    Component = _props$as === void 0 ? 'div' : _props$as,\n    _props$data = props.data,\n    data = _props$data === void 0 ? emptyArray : _props$data,\n    _props$classPrefix = props.classPrefix,\n    classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n    defaultValue = props.defaultValue,\n    valueProp = props.value,\n    _props$valueKey = props.valueKey,\n    valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n    _props$labelKey = props.labelKey,\n    labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\n    _props$childrenKey = props.childrenKey,\n    childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\n    disabled = props.disabled,\n    _props$disabledItemVa = props.disabledItemValues,\n    disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\n    _props$cleanable = props.cleanable,\n    cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n    overrideLocale = props.locale,\n    toggleAs = props.toggleAs,\n    style = props.style,\n    _props$countable = props.countable,\n    countable = _props$countable === void 0 ? true : _props$countable,\n    _props$cascade = props.cascade,\n    cascade = _props$cascade === void 0 ? true : _props$cascade,\n    inline = props.inline,\n    placeholder = props.placeholder,\n    _props$placement = props.placement,\n    placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n    _props$appearance = props.appearance,\n    appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n    menuWidth = props.menuWidth,\n    menuHeight = props.menuHeight,\n    menuClassName = props.menuClassName,\n    menuStyle = props.menuStyle,\n    _props$searchable = props.searchable,\n    searchable = _props$searchable === void 0 ? true : _props$searchable,\n    _props$uncheckableIte = props.uncheckableItemValues,\n    uncheckableItemValues = _props$uncheckableIte === void 0 ? emptyArray : _props$uncheckableIte,\n    id = props.id,\n    getChildren = props.getChildren,\n    renderValue = props.renderValue,\n    renderMenu = props.renderMenu,\n    renderMenuItem = props.renderMenuItem,\n    renderExtraFooter = props.renderExtraFooter,\n    onEnter = props.onEnter,\n    onExit = props.onExit,\n    onExited = props.onExited,\n    onClean = props.onClean,\n    onSearch = props.onSearch,\n    onSelect = props.onSelect,\n    onChange = props.onChange,\n    onOpen = props.onOpen,\n    onClose = props.onClose,\n    onCheck = props.onCheck,\n    rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"classPrefix\", \"defaultValue\", \"value\", \"valueKey\", \"labelKey\", \"childrenKey\", \"disabled\", \"disabledItemValues\", \"cleanable\", \"locale\", \"toggleAs\", \"style\", \"countable\", \"cascade\", \"inline\", \"placeholder\", \"placement\", \"appearance\", \"menuWidth\", \"menuHeight\", \"menuClassName\", \"menuStyle\", \"searchable\", \"uncheckableItemValues\", \"id\", \"getChildren\", \"renderValue\", \"renderMenu\", \"renderMenuItem\", \"renderExtraFooter\", \"onEnter\", \"onExit\", \"onExited\", \"onClean\", \"onSearch\", \"onSelect\", \"onChange\", \"onOpen\", \"onClose\", \"onCheck\"]);\n  var itemKeys = {\n    childrenKey: childrenKey,\n    labelKey: labelKey,\n    valueKey: valueKey\n  };\n  var _useState = useState(false),\n    active = _useState[0],\n    setActive = _useState[1];\n  var _useFlattenData = useFlattenData(data, itemKeys),\n    flattenData = _useFlattenData.flattenData,\n    addFlattenData = _useFlattenData.addFlattenData;\n  var _useControlled = useControlled(valueProp, defaultValue),\n    controlledValue = _useControlled[0];\n  var _useCascadeValue = useCascadeValue(_extends({}, itemKeys, {\n      uncheckableItemValues: uncheckableItemValues,\n      cascade: cascade,\n      value: controlledValue\n    }), flattenData),\n    value = _useCascadeValue.value,\n    setValue = _useCascadeValue.setValue,\n    splitValue = _useCascadeValue.splitValue; // The columns displayed in the cascading panel.\n  var _useColumnData = useColumnData(flattenData),\n    columnData = _useColumnData.columnData,\n    setColumnData = _useColumnData.setColumnData,\n    addColumn = _useColumnData.addColumn,\n    removeColumnByIndex = _useColumnData.removeColumnByIndex,\n    enforceUpdateColumnData = _useColumnData.enforceUpdateColumnData;\n  useUpdateEffect(function () {\n    enforceUpdateColumnData(data);\n  }, [data]);\n\n  // The path after cascading data selection.\n  var _useState2 = useState(),\n    selectedPaths = _useState2[0],\n    setSelectedPaths = _useState2[1];\n  var triggerRef = useRef(null);\n  var overlayRef = useRef(null);\n  var targetRef = useRef(null);\n  var searchInputRef = useRef(null);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n  var _useCustom = useCustom('Picker', overrideLocale),\n    locale = _useCustom.locale,\n    rtl = _useCustom.rtl;\n  var selectedItems = flattenData.filter(function (item) {\n    return value.some(function (v) {\n      return v === item[valueKey];\n    });\n  }) || [];\n\n  // Used to hover the focuse item  when trigger `onKeydown`\n  var _useFocusItemValue = useFocusItemValue(selectedPaths === null || selectedPaths === void 0 ? void 0 : (_selectedPaths = selectedPaths[selectedPaths.length - 1]) === null || _selectedPaths === void 0 ? void 0 : _selectedPaths[valueKey], {\n      rtl: rtl,\n      data: flattenData,\n      valueKey: valueKey,\n      defaultLayer: selectedPaths !== null && selectedPaths !== void 0 && selectedPaths.length ? selectedPaths.length - 1 : 0,\n      target: function target() {\n        return overlayRef.current;\n      },\n      callback: useCallback(function (value) {\n        var _getColumnsAndPaths = getColumnsAndPaths(data, flattenData.find(function (item) {\n            return item[valueKey] === value;\n          }), {\n            getParent: function getParent() {\n              return undefined;\n            },\n            getChildren: function getChildren(item) {\n              return item[childrenKey];\n            }\n          }),\n          columns = _getColumnsAndPaths.columns,\n          path = _getColumnsAndPaths.path;\n        setColumnData(columns);\n        setSelectedPaths(path);\n      }, [childrenKey, data, flattenData, setColumnData, valueKey])\n    }),\n    focusItemValue = _useFocusItemValue.focusItemValue,\n    setLayer = _useFocusItemValue.setLayer,\n    setKeys = _useFocusItemValue.setKeys,\n    onFocusItem = _useFocusItemValue.onKeyDown;\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n  var hasValue = selectedItems.length > 0 || Number(valueProp === null || valueProp === void 0 ? void 0 : valueProp.length) > 0 && isFunction(renderValue);\n  var _useClassNames = useClassNames(classPrefix),\n    prefix = _useClassNames.prefix,\n    merge = _useClassNames.merge;\n  var _useState3 = useState(''),\n    searchKeyword = _useState3[0],\n    setSearchKeyword = _useState3[1];\n  var handleEntered = useCallback(function () {\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    setActive(false);\n    setSearchKeyword('');\n  }, []);\n  var handleSelect = useCallback(function (node, cascadePaths, event) {\n    var _node$childrenKey, _node$childrenKey2, _triggerRef$current, _triggerRef$current$u;\n    setSelectedPaths(cascadePaths);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadePaths, event);\n    var columnIndex = cascadePaths.length;\n\n    // Lazy load node's children\n    if (typeof getChildren === 'function' && ((_node$childrenKey = node[childrenKey]) === null || _node$childrenKey === void 0 ? void 0 : _node$childrenKey.length) === 0) {\n      node.loading = true;\n      var children = getChildren(node);\n      if (children instanceof Promise) {\n        children.then(function (data) {\n          node.loading = false;\n          node[childrenKey] = data;\n          if (targetRef.current || inline) {\n            addFlattenData(data, node);\n            addColumn(data, columnIndex);\n          }\n        });\n      } else {\n        node.loading = false;\n        node[childrenKey] = children;\n        addFlattenData(children, node);\n        addColumn(children, columnIndex);\n      }\n    } else if ((_node$childrenKey2 = node[childrenKey]) !== null && _node$childrenKey2 !== void 0 && _node$childrenKey2.length) {\n      addColumn(node[childrenKey], columnIndex);\n    } else {\n      // Removes subsequent columns of the current column when the clicked node is a leaf node.\n      removeColumnByIndex(columnIndex);\n    }\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$u = _triggerRef$current.updatePosition) === null || _triggerRef$current$u === void 0 ? void 0 : _triggerRef$current$u.call(_triggerRef$current);\n  }, [onSelect, getChildren, childrenKey, inline, addFlattenData, addColumn, removeColumnByIndex]);\n  var handleCheck = useCallback(function (node, event, checked) {\n    var nodeValue = node[valueKey];\n    var nextValue = [];\n    if (cascade) {\n      nextValue = splitValue(node, checked, value).value;\n    } else {\n      nextValue = [].concat(value);\n      if (checked) {\n        nextValue.push(nodeValue);\n      } else {\n        nextValue = nextValue.filter(function (n) {\n          return n !== nodeValue;\n        });\n      }\n    }\n    setValue(nextValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    onCheck === null || onCheck === void 0 ? void 0 : onCheck(nextValue, node, checked, event);\n  }, [cascade, onChange, onCheck, setValue, splitValue, value, valueKey]);\n  var handleClean = useCallback(function (event) {\n    if (disabled || !targetRef.current) {\n      return;\n    }\n    setSelectedPaths([]);\n    setValue([]);\n    setColumnData([data]);\n    onChange === null || onChange === void 0 ? void 0 : onChange([], event);\n  }, [data, disabled, onChange, setColumnData, setValue]);\n  var handleMenuPressEnter = useCallback(function (event) {\n    var _overlayRef$current;\n    var focusItem = findNodeOfTree(data, function (item) {\n      return item[valueKey] === focusItemValue;\n    });\n    var checkbox = (_overlayRef$current = overlayRef.current) === null || _overlayRef$current === void 0 ? void 0 : _overlayRef$current.querySelector(\"[data-key=\\\"\" + focusItemValue + \"\\\"] [type=\\\"checkbox\\\"]\");\n    if (checkbox) {\n      handleCheck(focusItem, event, (checkbox === null || checkbox === void 0 ? void 0 : checkbox.getAttribute('aria-checked')) !== 'true');\n    }\n  }, [data, focusItemValue, handleCheck, valueKey]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    searchInputRef: searchInputRef,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter\n  }, rest));\n  var handleSearch = useCallback(function (value, event) {\n    setSearchKeyword(value);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n    if (value) {\n      setLayer(0);\n    } else if (selectedPaths !== null && selectedPaths !== void 0 && selectedPaths.length) {\n      setLayer(selectedPaths.length - 1);\n    }\n    setKeys([]);\n  }, [onSearch, selectedPaths, setKeys, setLayer]);\n  var getSearchResult = useCallback(function () {\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (uncheckableItemValues.some(function (value) {\n        return item[valueKey] === value;\n      })) {\n        return false;\n      }\n      if (item[labelKey].match(new RegExp(getSafeRegExpString(searchKeyword), 'i'))) {\n        return true;\n      }\n      return false;\n    });\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]);\n\n      // A maximum of 100 search results are returned.\n      if (i === 99) {\n        return items;\n      }\n    }\n    return items;\n  }, [flattenData, labelKey, searchKeyword, uncheckableItemValues, valueKey]);\n  var renderSearchRow = function renderSearchRow(item, key) {\n    var _extends2;\n    var nodes = getNodeParents(item);\n    var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n    var labelElements = [];\n    var a = item[labelKey].split(regx);\n    var b = item[labelKey].match(regx);\n    for (var i = 0; i < a.length; i++) {\n      labelElements.push(a[i]);\n      if (b[i]) {\n        labelElements.push( /*#__PURE__*/React.createElement(\"span\", {\n          key: i,\n          className: prefix('cascader-search-match')\n        }, b[i]));\n      }\n    }\n    nodes.push(_extends({}, item, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2)));\n    var active = value.some(function (value) {\n      if (cascade) {\n        return nodes.some(function (node) {\n          return node[valueKey] === value;\n        });\n      }\n      return item[valueKey] === value;\n    });\n    var disabled = disabledItemValues.some(function (value) {\n      return nodes.some(function (node) {\n        return node[valueKey] === value;\n      });\n    });\n    var itemClasses = prefix('cascader-row', {\n      'cascader-row-disabled': disabled,\n      'cascader-row-focus': item[valueKey] === focusItemValue\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: key,\n      className: itemClasses,\n      \"aria-disabled\": disabled,\n      \"data-key\": item[valueKey]\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      disabled: disabled,\n      checked: active,\n      value: item[valueKey],\n      indeterminate: cascade && !active && isSomeChildChecked(item, value, {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }),\n      onChange: function onChange(_value, checked, event) {\n        handleCheck(item, event, checked);\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: prefix('cascader-cols')\n    }, nodes.map(function (node, index) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: \"col-\" + index,\n        className: prefix('cascader-col')\n      }, node[labelKey]);\n    }))));\n  };\n  var renderSearchResultPanel = function renderSearchResultPanel() {\n    if (searchKeyword === '') {\n      return null;\n    }\n    var items = getSearchResult();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('cascader-search-panel'),\n      \"data-layer\": 0\n    }, items.length ? items.map(renderSearchRow) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('none')\n    }, locale.noResultsText));\n  };\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var _ref = positionProps || {},\n      left = _ref.left,\n      top = _ref.top,\n      className = _ref.className;\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n    var classes = merge(className, menuClassName, prefix('cascader-menu', 'multi-cascader-menu', {\n      inline: inline\n    }));\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      className: classes,\n      style: styles,\n      target: triggerRef,\n      onKeyDown: onPickerKeyDown\n    }, searchable && /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword,\n      inputRef: searchInputRef\n    }), renderSearchResultPanel(), searchKeyword === '' && /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      cascade: cascade,\n      menuWidth: menuWidth,\n      menuHeight: menuHeight,\n      uncheckableItemValues: uncheckableItemValues,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      classPrefix: 'picker-cascader-menu',\n      cascadeData: columnData,\n      cascadePaths: selectedPaths,\n      value: value,\n      onSelect: handleSelect,\n      onCheck: handleCheck,\n      renderMenu: renderMenu,\n      renderMenuItem: renderMenuItem\n    }), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n  var selectedElement = placeholder;\n  if (selectedItems.length > 0) {\n    selectedElement = /*#__PURE__*/React.createElement(SelectedElement, {\n      selectedItems: selectedItems,\n      countable: countable,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      prefix: prefix,\n      cascade: cascade,\n      locale: locale\n    });\n  }\n  if (hasValue && isFunction(renderValue)) {\n    selectedElement = renderValue(value.length ? value : valueProp !== null && valueProp !== void 0 ? valueProp : [], selectedItems, selectedElement);\n    // If renderValue returns null or undefined, hasValue is false.\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n      classPrefix: classPrefix,\n      hasValue: hasValue,\n      countable: countable,\n      name: 'cascader',\n      appearance: appearance,\n      cleanable: cleanable\n    })),\n    classes = _usePickerClassName[0],\n    usedClassNamePropKeys = _usePickerClassName[1];\n  if (inline) {\n    return renderDropdownMenu();\n  }\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: createChainedFunction(handleEntered, onEnter),\n    onExited: createChainedFunction(handleExited, onExited),\n    onExit: createChainedFunction(onClose, onExit),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    as: toggleAs,\n    appearance: appearance,\n    disabled: disabled,\n    ref: targetRef,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || locale.placeholder)));\n});\nMultiCascader.displayName = 'MultiCascader';\nMultiCascader.propTypes = _extends({}, listPickerPropTypes, {\n  value: PropTypes.array,\n  disabledItemValues: PropTypes.array,\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  cascade: PropTypes.bool,\n  inline: PropTypes.bool,\n  countable: PropTypes.bool,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  uncheckableItemValues: PropTypes.array,\n  searchable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  renderMenu: PropTypes.func,\n  onSearch: PropTypes.func,\n  onSelect: PropTypes.func,\n  onCheck: PropTypes.func\n});\nexport default MultiCascader;","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","React","useState","useRef","useCallback","PropTypes","pick","omit","isFunction","isNil","DropdownMenu","Checkbox","useCascadeValue","useColumnData","useFlattenData","isSomeChildChecked","getNodeParents","findNodeOfTree","getColumnsAndPaths","createChainedFunction","mergeRefs","getSafeRegExpString","useClassNames","useCustom","useUpdateEffect","useControlled","PickerToggle","PickerOverlay","SearchBar","SelectedElement","PickerToggleTrigger","usePickerClassName","usePublicMethods","useToggleKeyDownEvent","useFocusItemValue","pickTriggerPropKeys","omitTriggerPropKeys","listPickerPropTypes","emptyArray","MultiCascader","forwardRef","props","ref","_selectedPaths","_props$as","as","Component","_props$data","data","_props$classPrefix","classPrefix","defaultValue","valueProp","value","_props$valueKey","valueKey","_props$labelKey","labelKey","_props$childrenKey","childrenKey","disabled","_props$disabledItemVa","disabledItemValues","_props$cleanable","cleanable","overrideLocale","locale","toggleAs","style","_props$countable","countable","_props$cascade","cascade","inline","placeholder","_props$placement","placement","_props$appearance","appearance","menuWidth","menuHeight","menuClassName","menuStyle","_props$searchable","searchable","_props$uncheckableIte","uncheckableItemValues","id","getChildren","renderValue","renderMenu","renderMenuItem","renderExtraFooter","onEnter","onExit","onExited","onClean","onSearch","onSelect","onChange","onOpen","onClose","onCheck","rest","itemKeys","_useState","active","setActive","_useFlattenData","flattenData","addFlattenData","_useControlled","controlledValue","_useCascadeValue","setValue","splitValue","_useColumnData","columnData","setColumnData","addColumn","removeColumnByIndex","enforceUpdateColumnData","_useState2","selectedPaths","setSelectedPaths","triggerRef","overlayRef","targetRef","searchInputRef","_useCustom","rtl","selectedItems","filter","item","some","v","_useFocusItemValue","length","defaultLayer","target","current","callback","_getColumnsAndPaths","find","getParent","undefined","columns","path","focusItemValue","setLayer","setKeys","onFocusItem","onKeyDown","hasValue","Number","_useClassNames","prefix","merge","_useState3","searchKeyword","setSearchKeyword","handleEntered","handleExited","handleSelect","node","cascadePaths","event","_node$childrenKey","_node$childrenKey2","_triggerRef$current","_triggerRef$current$u","columnIndex","loading","children","Promise","then","updatePosition","call","handleCheck","checked","nodeValue","nextValue","concat","push","n","handleClean","handleMenuPressEnter","_overlayRef$current","focusItem","checkbox","querySelector","getAttribute","onPickerKeyDown","toggle","onMenuKeyDown","onMenuPressEnter","handleSearch","getSearchResult","items","result","match","RegExp","i","renderSearchRow","key","_extends2","nodes","regx","labelElements","a","split","b","createElement","className","itemClasses","indeterminate","_value","map","index","renderSearchResultPanel","noResultsText","renderDropdownMenu","positionProps","speakerRef","_ref","left","top","styles","classes","searchPlaceholder","inputRef","cascadeData","selectedElement","_usePickerClassName","name","usedClassNamePropKeys","pickerProps","speaker","inputValue","displayName","propTypes","array","any","oneOf","bool","number","oneOfType","string","func"],"sources":["D:/MERN estate/client/node_modules/rsuite/esm/MultiCascader/MultiCascader.js"],"sourcesContent":["'use client';\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport pick from 'lodash/pick';\nimport omit from 'lodash/omit';\nimport isFunction from 'lodash/isFunction';\nimport isNil from 'lodash/isNil';\nimport DropdownMenu from './DropdownMenu';\nimport Checkbox from '../Checkbox';\nimport { useCascadeValue, useColumnData, useFlattenData, isSomeChildChecked } from './utils';\nimport { getNodeParents, findNodeOfTree } from '../utils/treeUtils';\nimport { getColumnsAndPaths } from '../Cascader/utils';\nimport { createChainedFunction, mergeRefs, getSafeRegExpString, useClassNames, useCustom, useUpdateEffect, useControlled } from '../utils';\nimport { PickerToggle, PickerOverlay, SearchBar, SelectedElement, PickerToggleTrigger, usePickerClassName, usePublicMethods, useToggleKeyDownEvent, useFocusItemValue, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nvar emptyArray = [];\n\n/**\n * The `MultiCascader` component is used to select multiple values from cascading options.\n * @see https://rsuitejs.com/components/multi-cascader/\n */\nvar MultiCascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _selectedPaths;\n  var _props$as = props.as,\n    Component = _props$as === void 0 ? 'div' : _props$as,\n    _props$data = props.data,\n    data = _props$data === void 0 ? emptyArray : _props$data,\n    _props$classPrefix = props.classPrefix,\n    classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n    defaultValue = props.defaultValue,\n    valueProp = props.value,\n    _props$valueKey = props.valueKey,\n    valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n    _props$labelKey = props.labelKey,\n    labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\n    _props$childrenKey = props.childrenKey,\n    childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\n    disabled = props.disabled,\n    _props$disabledItemVa = props.disabledItemValues,\n    disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\n    _props$cleanable = props.cleanable,\n    cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n    overrideLocale = props.locale,\n    toggleAs = props.toggleAs,\n    style = props.style,\n    _props$countable = props.countable,\n    countable = _props$countable === void 0 ? true : _props$countable,\n    _props$cascade = props.cascade,\n    cascade = _props$cascade === void 0 ? true : _props$cascade,\n    inline = props.inline,\n    placeholder = props.placeholder,\n    _props$placement = props.placement,\n    placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n    _props$appearance = props.appearance,\n    appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n    menuWidth = props.menuWidth,\n    menuHeight = props.menuHeight,\n    menuClassName = props.menuClassName,\n    menuStyle = props.menuStyle,\n    _props$searchable = props.searchable,\n    searchable = _props$searchable === void 0 ? true : _props$searchable,\n    _props$uncheckableIte = props.uncheckableItemValues,\n    uncheckableItemValues = _props$uncheckableIte === void 0 ? emptyArray : _props$uncheckableIte,\n    id = props.id,\n    getChildren = props.getChildren,\n    renderValue = props.renderValue,\n    renderMenu = props.renderMenu,\n    renderMenuItem = props.renderMenuItem,\n    renderExtraFooter = props.renderExtraFooter,\n    onEnter = props.onEnter,\n    onExit = props.onExit,\n    onExited = props.onExited,\n    onClean = props.onClean,\n    onSearch = props.onSearch,\n    onSelect = props.onSelect,\n    onChange = props.onChange,\n    onOpen = props.onOpen,\n    onClose = props.onClose,\n    onCheck = props.onCheck,\n    rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"classPrefix\", \"defaultValue\", \"value\", \"valueKey\", \"labelKey\", \"childrenKey\", \"disabled\", \"disabledItemValues\", \"cleanable\", \"locale\", \"toggleAs\", \"style\", \"countable\", \"cascade\", \"inline\", \"placeholder\", \"placement\", \"appearance\", \"menuWidth\", \"menuHeight\", \"menuClassName\", \"menuStyle\", \"searchable\", \"uncheckableItemValues\", \"id\", \"getChildren\", \"renderValue\", \"renderMenu\", \"renderMenuItem\", \"renderExtraFooter\", \"onEnter\", \"onExit\", \"onExited\", \"onClean\", \"onSearch\", \"onSelect\", \"onChange\", \"onOpen\", \"onClose\", \"onCheck\"]);\n  var itemKeys = {\n    childrenKey: childrenKey,\n    labelKey: labelKey,\n    valueKey: valueKey\n  };\n  var _useState = useState(false),\n    active = _useState[0],\n    setActive = _useState[1];\n  var _useFlattenData = useFlattenData(data, itemKeys),\n    flattenData = _useFlattenData.flattenData,\n    addFlattenData = _useFlattenData.addFlattenData;\n  var _useControlled = useControlled(valueProp, defaultValue),\n    controlledValue = _useControlled[0];\n  var _useCascadeValue = useCascadeValue(_extends({}, itemKeys, {\n      uncheckableItemValues: uncheckableItemValues,\n      cascade: cascade,\n      value: controlledValue\n    }), flattenData),\n    value = _useCascadeValue.value,\n    setValue = _useCascadeValue.setValue,\n    splitValue = _useCascadeValue.splitValue; // The columns displayed in the cascading panel.\n  var _useColumnData = useColumnData(flattenData),\n    columnData = _useColumnData.columnData,\n    setColumnData = _useColumnData.setColumnData,\n    addColumn = _useColumnData.addColumn,\n    removeColumnByIndex = _useColumnData.removeColumnByIndex,\n    enforceUpdateColumnData = _useColumnData.enforceUpdateColumnData;\n  useUpdateEffect(function () {\n    enforceUpdateColumnData(data);\n  }, [data]);\n\n  // The path after cascading data selection.\n  var _useState2 = useState(),\n    selectedPaths = _useState2[0],\n    setSelectedPaths = _useState2[1];\n  var triggerRef = useRef(null);\n  var overlayRef = useRef(null);\n  var targetRef = useRef(null);\n  var searchInputRef = useRef(null);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n  var _useCustom = useCustom('Picker', overrideLocale),\n    locale = _useCustom.locale,\n    rtl = _useCustom.rtl;\n  var selectedItems = flattenData.filter(function (item) {\n    return value.some(function (v) {\n      return v === item[valueKey];\n    });\n  }) || [];\n\n  // Used to hover the focuse item  when trigger `onKeydown`\n  var _useFocusItemValue = useFocusItemValue(selectedPaths === null || selectedPaths === void 0 ? void 0 : (_selectedPaths = selectedPaths[selectedPaths.length - 1]) === null || _selectedPaths === void 0 ? void 0 : _selectedPaths[valueKey], {\n      rtl: rtl,\n      data: flattenData,\n      valueKey: valueKey,\n      defaultLayer: selectedPaths !== null && selectedPaths !== void 0 && selectedPaths.length ? selectedPaths.length - 1 : 0,\n      target: function target() {\n        return overlayRef.current;\n      },\n      callback: useCallback(function (value) {\n        var _getColumnsAndPaths = getColumnsAndPaths(data, flattenData.find(function (item) {\n            return item[valueKey] === value;\n          }), {\n            getParent: function getParent() {\n              return undefined;\n            },\n            getChildren: function getChildren(item) {\n              return item[childrenKey];\n            }\n          }),\n          columns = _getColumnsAndPaths.columns,\n          path = _getColumnsAndPaths.path;\n        setColumnData(columns);\n        setSelectedPaths(path);\n      }, [childrenKey, data, flattenData, setColumnData, valueKey])\n    }),\n    focusItemValue = _useFocusItemValue.focusItemValue,\n    setLayer = _useFocusItemValue.setLayer,\n    setKeys = _useFocusItemValue.setKeys,\n    onFocusItem = _useFocusItemValue.onKeyDown;\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n  var hasValue = selectedItems.length > 0 || Number(valueProp === null || valueProp === void 0 ? void 0 : valueProp.length) > 0 && isFunction(renderValue);\n  var _useClassNames = useClassNames(classPrefix),\n    prefix = _useClassNames.prefix,\n    merge = _useClassNames.merge;\n  var _useState3 = useState(''),\n    searchKeyword = _useState3[0],\n    setSearchKeyword = _useState3[1];\n  var handleEntered = useCallback(function () {\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    setActive(false);\n    setSearchKeyword('');\n  }, []);\n  var handleSelect = useCallback(function (node, cascadePaths, event) {\n    var _node$childrenKey, _node$childrenKey2, _triggerRef$current, _triggerRef$current$u;\n    setSelectedPaths(cascadePaths);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadePaths, event);\n    var columnIndex = cascadePaths.length;\n\n    // Lazy load node's children\n    if (typeof getChildren === 'function' && ((_node$childrenKey = node[childrenKey]) === null || _node$childrenKey === void 0 ? void 0 : _node$childrenKey.length) === 0) {\n      node.loading = true;\n      var children = getChildren(node);\n      if (children instanceof Promise) {\n        children.then(function (data) {\n          node.loading = false;\n          node[childrenKey] = data;\n          if (targetRef.current || inline) {\n            addFlattenData(data, node);\n            addColumn(data, columnIndex);\n          }\n        });\n      } else {\n        node.loading = false;\n        node[childrenKey] = children;\n        addFlattenData(children, node);\n        addColumn(children, columnIndex);\n      }\n    } else if ((_node$childrenKey2 = node[childrenKey]) !== null && _node$childrenKey2 !== void 0 && _node$childrenKey2.length) {\n      addColumn(node[childrenKey], columnIndex);\n    } else {\n      // Removes subsequent columns of the current column when the clicked node is a leaf node.\n      removeColumnByIndex(columnIndex);\n    }\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$u = _triggerRef$current.updatePosition) === null || _triggerRef$current$u === void 0 ? void 0 : _triggerRef$current$u.call(_triggerRef$current);\n  }, [onSelect, getChildren, childrenKey, inline, addFlattenData, addColumn, removeColumnByIndex]);\n  var handleCheck = useCallback(function (node, event, checked) {\n    var nodeValue = node[valueKey];\n    var nextValue = [];\n    if (cascade) {\n      nextValue = splitValue(node, checked, value).value;\n    } else {\n      nextValue = [].concat(value);\n      if (checked) {\n        nextValue.push(nodeValue);\n      } else {\n        nextValue = nextValue.filter(function (n) {\n          return n !== nodeValue;\n        });\n      }\n    }\n    setValue(nextValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    onCheck === null || onCheck === void 0 ? void 0 : onCheck(nextValue, node, checked, event);\n  }, [cascade, onChange, onCheck, setValue, splitValue, value, valueKey]);\n  var handleClean = useCallback(function (event) {\n    if (disabled || !targetRef.current) {\n      return;\n    }\n    setSelectedPaths([]);\n    setValue([]);\n    setColumnData([data]);\n    onChange === null || onChange === void 0 ? void 0 : onChange([], event);\n  }, [data, disabled, onChange, setColumnData, setValue]);\n  var handleMenuPressEnter = useCallback(function (event) {\n    var _overlayRef$current;\n    var focusItem = findNodeOfTree(data, function (item) {\n      return item[valueKey] === focusItemValue;\n    });\n    var checkbox = (_overlayRef$current = overlayRef.current) === null || _overlayRef$current === void 0 ? void 0 : _overlayRef$current.querySelector(\"[data-key=\\\"\" + focusItemValue + \"\\\"] [type=\\\"checkbox\\\"]\");\n    if (checkbox) {\n      handleCheck(focusItem, event, (checkbox === null || checkbox === void 0 ? void 0 : checkbox.getAttribute('aria-checked')) !== 'true');\n    }\n  }, [data, focusItemValue, handleCheck, valueKey]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    searchInputRef: searchInputRef,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter\n  }, rest));\n  var handleSearch = useCallback(function (value, event) {\n    setSearchKeyword(value);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n    if (value) {\n      setLayer(0);\n    } else if (selectedPaths !== null && selectedPaths !== void 0 && selectedPaths.length) {\n      setLayer(selectedPaths.length - 1);\n    }\n    setKeys([]);\n  }, [onSearch, selectedPaths, setKeys, setLayer]);\n  var getSearchResult = useCallback(function () {\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (uncheckableItemValues.some(function (value) {\n        return item[valueKey] === value;\n      })) {\n        return false;\n      }\n      if (item[labelKey].match(new RegExp(getSafeRegExpString(searchKeyword), 'i'))) {\n        return true;\n      }\n      return false;\n    });\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]);\n\n      // A maximum of 100 search results are returned.\n      if (i === 99) {\n        return items;\n      }\n    }\n    return items;\n  }, [flattenData, labelKey, searchKeyword, uncheckableItemValues, valueKey]);\n  var renderSearchRow = function renderSearchRow(item, key) {\n    var _extends2;\n    var nodes = getNodeParents(item);\n    var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n    var labelElements = [];\n    var a = item[labelKey].split(regx);\n    var b = item[labelKey].match(regx);\n    for (var i = 0; i < a.length; i++) {\n      labelElements.push(a[i]);\n      if (b[i]) {\n        labelElements.push( /*#__PURE__*/React.createElement(\"span\", {\n          key: i,\n          className: prefix('cascader-search-match')\n        }, b[i]));\n      }\n    }\n    nodes.push(_extends({}, item, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2)));\n    var active = value.some(function (value) {\n      if (cascade) {\n        return nodes.some(function (node) {\n          return node[valueKey] === value;\n        });\n      }\n      return item[valueKey] === value;\n    });\n    var disabled = disabledItemValues.some(function (value) {\n      return nodes.some(function (node) {\n        return node[valueKey] === value;\n      });\n    });\n    var itemClasses = prefix('cascader-row', {\n      'cascader-row-disabled': disabled,\n      'cascader-row-focus': item[valueKey] === focusItemValue\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: key,\n      className: itemClasses,\n      \"aria-disabled\": disabled,\n      \"data-key\": item[valueKey]\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      disabled: disabled,\n      checked: active,\n      value: item[valueKey],\n      indeterminate: cascade && !active && isSomeChildChecked(item, value, {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }),\n      onChange: function onChange(_value, checked, event) {\n        handleCheck(item, event, checked);\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: prefix('cascader-cols')\n    }, nodes.map(function (node, index) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: \"col-\" + index,\n        className: prefix('cascader-col')\n      }, node[labelKey]);\n    }))));\n  };\n  var renderSearchResultPanel = function renderSearchResultPanel() {\n    if (searchKeyword === '') {\n      return null;\n    }\n    var items = getSearchResult();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('cascader-search-panel'),\n      \"data-layer\": 0\n    }, items.length ? items.map(renderSearchRow) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('none')\n    }, locale.noResultsText));\n  };\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var _ref = positionProps || {},\n      left = _ref.left,\n      top = _ref.top,\n      className = _ref.className;\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n    var classes = merge(className, menuClassName, prefix('cascader-menu', 'multi-cascader-menu', {\n      inline: inline\n    }));\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      className: classes,\n      style: styles,\n      target: triggerRef,\n      onKeyDown: onPickerKeyDown\n    }, searchable && /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword,\n      inputRef: searchInputRef\n    }), renderSearchResultPanel(), searchKeyword === '' && /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      cascade: cascade,\n      menuWidth: menuWidth,\n      menuHeight: menuHeight,\n      uncheckableItemValues: uncheckableItemValues,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      classPrefix: 'picker-cascader-menu',\n      cascadeData: columnData,\n      cascadePaths: selectedPaths,\n      value: value,\n      onSelect: handleSelect,\n      onCheck: handleCheck,\n      renderMenu: renderMenu,\n      renderMenuItem: renderMenuItem\n    }), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n  var selectedElement = placeholder;\n  if (selectedItems.length > 0) {\n    selectedElement = /*#__PURE__*/React.createElement(SelectedElement, {\n      selectedItems: selectedItems,\n      countable: countable,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      prefix: prefix,\n      cascade: cascade,\n      locale: locale\n    });\n  }\n  if (hasValue && isFunction(renderValue)) {\n    selectedElement = renderValue(value.length ? value : valueProp !== null && valueProp !== void 0 ? valueProp : [], selectedItems, selectedElement);\n    // If renderValue returns null or undefined, hasValue is false.\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n      classPrefix: classPrefix,\n      hasValue: hasValue,\n      countable: countable,\n      name: 'cascader',\n      appearance: appearance,\n      cleanable: cleanable\n    })),\n    classes = _usePickerClassName[0],\n    usedClassNamePropKeys = _usePickerClassName[1];\n  if (inline) {\n    return renderDropdownMenu();\n  }\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: createChainedFunction(handleEntered, onEnter),\n    onExited: createChainedFunction(handleExited, onExited),\n    onExit: createChainedFunction(onClose, onExit),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    as: toggleAs,\n    appearance: appearance,\n    disabled: disabled,\n    ref: targetRef,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || locale.placeholder)));\n});\nMultiCascader.displayName = 'MultiCascader';\nMultiCascader.propTypes = _extends({}, listPickerPropTypes, {\n  value: PropTypes.array,\n  disabledItemValues: PropTypes.array,\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  cascade: PropTypes.bool,\n  inline: PropTypes.bool,\n  countable: PropTypes.bool,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  uncheckableItemValues: PropTypes.array,\n  searchable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  renderMenu: PropTypes.func,\n  onSearch: PropTypes.func,\n  onSelect: PropTypes.func,\n  onCheck: PropTypes.func\n});\nexport default MultiCascader;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}